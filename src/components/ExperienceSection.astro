---
import { experienceData, personalInfo, skills } from '../data/portfolio.js';
import '../styles/components/experience-section.css';
---

<section id="experience" class="experience-section section-card">
    <div class="container">
        <h2>Mi Experiencia Laboral</h2>
        <div class="timeline">
            {experienceData.map((item, index) => {
                const usedSkillsDetails = item.skillsUsed
                    .map(skillName => skills.find(s => s.name === skillName))
                    .filter(Boolean);

                return (
                    <div class={`timeline-item ${index % 2 === 0 ? 'left' : 'right'}`}>
                        <div class="timeline-content">
                            <h3>{item.title}</h3>
                            <p class="company-period">{item.company} <span class="period-separator">—</span> {item.period}</p>
                            <div class="experience-description">
                                {item.description.map(desc => <p>{desc}</p>)}
                            </div>

                            {usedSkillsDetails.length > 0 && (
                                <div class="experience-skills">
                                    <h4>Habilidades usadas:</h4>
                                    <div class="skills-tags">
                                        {usedSkillsDetails.map(skill => (
                                            skill && (
                                                <span class="skill-tag" style={`background-color: ${skill.color || '#666'};`}> 
                                                    {skill.icon && <i class={skill.icon}></i>}
                                                    {skill.img && <img src={skill.img} alt={`${skill.name} Logo`} class="skill-tag-img" />}
                                                    {skill.name}
                                                </span>
                                            )
                                        ))}
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                );
            })}
        </div>
        <p class="linkedin-cta">Para un perfil más detallado y completo, visita mi <a href={personalInfo.linkedinUrl} target="_blank" rel="noopener noreferrer">LinkedIn <i class="fab fa-linkedin"></i></a></p>
    </div>
</section>
